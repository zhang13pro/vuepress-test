import{o as a,c as t,b as e,d,a as o}from"./app.60568e47.js";import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";const n={},s={"data-v-1605a430":""},p=e("h1",{"data-v-1605a430":"",class:"main-title"}," 19 | \u4E8B\u4EF6\u8F6E\u8BE2\uFF1A\u5982\u4F55\u7406\u89E3\u6D4F\u89C8\u5668\u4E2D\u7684 EventLoop\uFF1F ",-1),l=e("div",{"data-v-1605a430":"",class:"main-tips"},[d(" 2021/03/10 "),e("span",{"data-v-1605a430":"",class:"auth"},"\u82E5\u79BB")],-1),r=e("div",{"data-v-1605a430":"",class:"media-player-wrap"},[e("div",{"data-v-6ecd2302":"","data-v-1605a430":""},[e("div",{"data-v-6ecd2302":"",class:"media-container"},[e("div",{"data-v-6ecd2302":"",class:"button-wrap inline-block"},[e("div",{"data-v-6ecd2302":"",class:"button-icon inline-block"})]),e("div",{"data-v-6ecd2302":"",class:"data-wrap inline-block"},[e("div",{"data-v-6ecd2302":"",class:"progress-bar"},[e("div",{class:"vue-slider vue-slider-ltr",style:{padding:"7px 0px",width:"auto",height:"4px"}},[e("div",{class:"vue-slider-rail",style:{height:"2px",background:"rgb(213, 218, 223)","border-radius":"1.5px"}},[e("div",{class:"vue-slider-process",style:{height:"100%",top:"0px",left:"0%",width:"0%","transition-property":"width, left","transition-duration":"0.5s",background:"rgb(252, 215, 102)"}}),e("div",{"aria-valuetext":"00:00/12:02",class:"vue-slider-dot vue-slider-dot-hover",role:"slider","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"722","aria-orientation":"horizontal",tabindex:"0",style:{width:"14px",height:"14px",transform:"translate(-50%, -50%)",top:"50%",left:"0%",transition:"left 0.5s ease 0s"}},[e("div",{class:"vue-slider-dot-handle",style:{width:"16px",height:"16px",background:"rgb(252, 215, 102)","box-shadow":"none","margin-top":"-1px","z-index":"1"}}),e("div",{class:"vue-slider-dot-tooltip vue-slider-dot-tooltip-top"},[e("div",{class:"vue-slider-dot-tooltip-inner vue-slider-dot-tooltip-inner-top",style:{padding:"2px 12px","border-radius":"14px","font-size":"14px",color:"rgb(0, 0, 0)",background:"rgb(252, 215, 102)","min-width":"20px","border-color":"rgb(252, 215, 102)"}},[e("span",{class:"vue-slider-dot-tooltip-text"},"00:00/12:02")])])])])])]),e("div",{"data-v-6ecd2302":"",class:"detail-wrap"},[e("div",{"data-v-6ecd2302":"",class:"detail-one"},"31.38M"),e("div",{"data-v-6ecd2302":"",class:"detail-two"},"00:00/12:02")])]),e("div",{"data-v-6ecd2302":"",class:"division-line inline-block"}),e("div",{"data-v-6ecd2302":"",class:"viedo-wrap inline-block"},[e("div",{"data-v-6ecd2302":"",class:"viedo-icon"}),e("div",{"data-v-6ecd2302":"",class:"text"},"\u770B\u89C6\u9891")])])])],-1),c=o(`<div data-v-1605a430="" class="main-container"><div data-v-1605a430="" class="rich-text-wrap"><p data-nodeid="1698" class=""> \u4E0A\u4E00\u8BB2\u6211\u4EEC\u63A2\u8BA8\u4E86 JavaScript \u5F15\u64CE\u7684\u5185\u5B58\u7BA1\u7406\u53CA\u5783\u573E\u56DE\u6536\u673A\u5236\uFF0C\u90A3\u4E48\u8FD9\u4E00\u8BB2\u4F9D\u7136\u8981\u8BA8\u8BBA\u548C JS \u5F15\u64CE\u76F8\u5173\u7684 Eventloop\uFF0C\u6211\u4F1A\u5E26\u4F60\u6DF1\u5165\u7406\u89E3 JavaScript \u5F15\u64CE\u6240\u505A\u7684\u5DE5\u4F5C\u3002 </p><p data-nodeid="1699"> \u6211\u4F1A\u5148\u8BB2\u89E3\u6D4F\u89C8\u5668\u7AEF\u7684 Eventloop \u7684\u8FD0\u884C\u673A\u5236\uFF0C\u5F85\u4F60\u5BF9\u6D4F\u89C8\u5668\u7AEF\u6709\u4E86\u4E00\u5B9A\u7684\u7406\u89E3\u4E4B\u540E\uFF0C\u518D\u5E26\u4F60\u8BBE\u8BA1\u4E00\u4E9B Node.js \u7684 Eventloop \u7684\u5E95\u5C42\u903B\u8F91\u3002\u4F60\u53EF\u4EE5\u53D1\u73B0\uFF0C\u65E0\u8BBA\u662F\u6D4F\u89C8\u5668\u7AEF\u8FD8\u662F\u670D\u52A1\u7AEF\uFF0C\u90FD\u5728\u4F7F\u7528 Eventloop\uFF0C\u867D\u7136\u4E24\u8005\u673A\u5236\u4E0D\u540C\uFF0C\u4F46\u90FD\u5229\u7528\u4E86 JavaScript \u8BED\u8A00\u7684\u5355\u7EBF\u7A0B\u548C\u975E\u963B\u585E\u7684\u7279\u70B9\u3002\u5E0C\u671B\u4F60\u80FD\u624E\u5B9E\u5730\u638C\u63E1\u8FD9\u90E8\u5206\u5185\u5BB9\uFF0C\u56E0\u4E3A\u8FD9\u5BF9\u4F60\u5728\u5DE5\u4F5C\u4E2D\u7F16\u5199\u9AD8\u6027\u80FD\u7684 JavaScript \u4EE3\u7801\u6709\u6240\u5E2E\u52A9\u3002 </p><p data-nodeid="1700">\u90A3\u4E48\u4F9D\u7167\u60EF\u4F8B\uFF0C\u5728\u8BFE\u7A0B\u5F00\u59CB\u524D\u8BF7\u4F60\u5148\u601D\u8003\u4E24\u4E2A\u95EE\u9898\uFF1A</p><ol data-nodeid="1701"><li data-nodeid="1702"><p data-nodeid="1703">\u6D4F\u89C8\u5668\u7AEF\u7684 Eventloop \u8D77\u5230\u4E86\u4EC0\u4E48\u4F5C\u7528\uFF1F</p></li><li data-nodeid="1704"><p data-nodeid="1705"> Node.js \u670D\u52A1\u7AEF\u7684 Eventloop \u7684\u4F5C\u7528\u53C8\u8868\u73B0\u5728\u54EA\uFF1F </p></li></ol><p data-nodeid="1706"> \u73B0\u5728\u5F00\u59CB\u8DDF\u7740\u6211\u4E00\u8D77\u63A2\u7A76\u6D4F\u89C8\u5668\u7AEF\u7684 Eventloop \u5427\u3002 </p><h3 data-nodeid="1707">\u6D4F\u89C8\u5668\u7684 Eventloop</h3><p data-nodeid="1708"> Eventloop \u662F JavaScript \u5F15\u64CE\u5F02\u6B65\u7F16\u7A0B\u80CC\u540E\u9700\u8981\u7279\u522B\u5173\u6CE8\u7684\u77E5\u8BC6\u70B9\u3002JS \u5728\u5355\u7EBF\u7A0B\u4E0A\u6267\u884C\u6240\u6709\u64CD\u4F5C\uFF0C\u867D\u7136\u662F\u5355\u7EBF\u7A0B\uFF0C\u4F46\u662F\u80FD\u591F\u9AD8\u6548\u5730\u89E3\u51B3\u95EE\u9898\uFF0C\u5E76\u80FD\u7ED9\u6211\u4EEC\u5E26\u6765\u4E00\u79CD\u201C\u591A\u7EBF\u7A0B\u201D\u7684\u9519\u89C9\uFF0C\u8FD9\u5176\u5B9E\u662F\u901A\u8FC7\u4F7F\u7528\u4E00\u4E9B\u6BD4\u8F83\u5408\u7406\u7684\u6570\u636E\u7ED3\u6784\u6765\u8FBE\u5230\u6B64\u6548\u679C\u7684\u3002\u6211\u4EEC\u4E00\u8D77\u6765\u770B\u4E0B JavaScript \u5F15\u64CE\u80CC\u540E\u90FD\u6709\u54EA\u4E9B\u4E1C\u897F\u5728\u540C\u65F6\u8FD0\u8F6C\u3002 </p><p data-nodeid="1709"><strong data-nodeid="1789">1.\u8C03\u7528\u5806\u6808\uFF08call stack\uFF09\u8D1F\u8D23\u8DDF\u8E2A\u6240\u6709\u8981\u6267\u884C\u7684\u4EE3\u7801</strong>\u3002\u6BCF\u5F53\u4E00\u4E2A\u51FD\u6570\u6267\u884C\u5B8C\u6210\u65F6\uFF0C\u5C31\u4F1A\u4ECE\u5806\u6808\u4E2D\u5F39\u51FA\uFF08pop\uFF09\u8BE5\u6267\u884C\u5B8C\u6210\u51FD\u6570\uFF1B\u5982\u679C\u6709\u4EE3\u7801\u9700\u8981\u8FDB\u53BB\u6267\u884C\u7684\u8BDD\uFF0C\u5C31\u8FDB\u884C push \u64CD\u4F5C\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A </p><p data-nodeid="1710"><img src="https://s0.lgstatic.com/i/image6/M00/17/42/CioPOWBHazGAfzOQAAIO77agDbw772.png" alt="\u56FE\u72474.png" data-nodeid="1792"></p><p data-nodeid="1711"><strong data-nodeid="1797">2.\u4E8B\u4EF6\u961F\u5217\uFF08event queue\uFF09\u8D1F\u8D23\u5C06\u65B0\u7684 function \u53D1\u9001\u5230\u961F\u5217\u4E2D\u8FDB\u884C\u5904\u7406</strong>\u3002\u5B83\u9075\u5FAA queue \u7684\u6570\u636E\u7ED3\u6784\u7279\u6027\uFF0C\u5148\u8FDB\u5148\u51FA\uFF0C\u5728\u8BE5\u987A\u5E8F\u4E0B\u53D1\u9001\u6240\u6709\u64CD\u4F5C\u4EE5\u8FDB\u884C\u6267\u884C\u3002\u5982\u4E0B\u56FE\u6240\u793A\uFF1A </p><p data-nodeid="1712"><img src="https://s0.lgstatic.com/i/image6/M00/17/46/Cgp9HWBHa0uAO5oEAAIrTDhci3M926.png" alt="\u56FE\u72475.png" data-nodeid="1800"></p><p data-nodeid="1713"><strong data-nodeid="1805">3.\u6BCF\u5F53\u8C03\u7528\u4E8B\u4EF6\u961F\u5217\uFF08event queue\uFF09\u4E2D\u7684\u5F02\u6B65\u51FD\u6570\u65F6\uFF0C\u90FD\u4F1A\u5C06\u5176\u53D1\u9001\u5230\u6D4F\u89C8\u5668 API</strong>\u3002\u6839\u636E\u4ECE\u8C03\u7528\u5806\u6808\u6536\u5230\u7684\u547D\u4EE4\uFF0CAPI \u5F00\u59CB\u81EA\u5DF1\u7684\u5355\u7EBF\u7A0B\u64CD\u4F5C\u3002\u5176\u4E2D setTimeout \u65B9\u6CD5\u5C31\u662F\u4E00\u4E2A\u6BD4\u8F83\u5178\u578B\u7684\u4F8B\u5B50\uFF0C\u5728\u5806\u6808\u4E2D\u5904\u7406 setTimeout \u64CD\u4F5C\u65F6\uFF0C\u4F1A\u5C06\u5176\u53D1\u9001\u5230\u76F8\u5E94\u7684 API\uFF0C\u8BE5 API \u4E00\u76F4\u7B49\u5230\u6307\u5B9A\u7684\u65F6\u95F4\u5C06\u6B64\u64CD\u4F5C\u9001\u56DE\u8FDB\u884C\u5904\u7406\u3002\u5B83\u5C06\u64CD\u4F5C\u53D1\u9001\u5230\u54EA\u91CC\u53BB\u5462\uFF1F\u7B54\u6848\u662F\u4E8B\u4EF6\u961F\u5217\uFF08event queue\uFF09\u3002\u8FD9\u6837\uFF0C\u5C31\u6709\u4E86\u4E00\u4E2A\u5FAA\u73AF\u7CFB\u7EDF\uFF0C\u7528\u4E8E\u5728 JavaScript \u4E2D\u8FD0\u884C\u5F02\u6B65\u64CD\u4F5C\u3002 </p><p data-nodeid="1714"><strong data-nodeid="1810">4.JavaScript \u8BED\u8A00\u672C\u8EAB\u662F\u5355\u7EBF\u7A0B\u7684\uFF0C\u800C\u6D4F\u89C8\u5668 API \u5145\u5F53\u5355\u72EC\u7684\u7EBF\u7A0B</strong>\u3002\u4E8B\u4EF6\u5FAA\u73AF\uFF08Eventloop\uFF09\u4FC3\u8FDB\u4E86\u8FD9\u4E00\u8FC7\u7A0B\uFF0C\u5B83\u4F1A\u4E0D\u65AD\u68C0\u67E5\u8C03\u7528\u5806\u6808\u662F\u5426\u4E3A\u7A7A\u3002\u5982\u679C\u4E3A\u7A7A\uFF0C\u5219\u4ECE\u4E8B\u4EF6\u961F\u5217\u4E2D\u6DFB\u52A0\u65B0\u7684\u51FD\u6570\u8FDB\u5165\u8C03\u7528\u6808\uFF08call stack\uFF09\uFF1B\u5982\u679C\u4E0D\u4E3A\u7A7A\uFF0C\u5219\u5904\u7406\u5F53\u524D\u51FD\u6570\u7684\u8C03\u7528\u3002\u6211\u4EEC\u628A\u6574\u4E2A\u8FC7\u7A0B\u4E32\u8D77\u6765\u5C31\u662F\u8FD9\u6837\u7684\u4E00\u4E2A\u5FAA\u73AF\u6267\u884C\u6D41\u7A0B\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A </p><p data-nodeid="1715"><img src="https://s0.lgstatic.com/i/image6/M00/17/43/CioPOWBHaz-AIvXzAAMjXUqLjBw024.png" alt="\u56FE\u72476.png" data-nodeid="1813"></p><p data-nodeid="1716"> \u901A\u8FC7\u4E0A\u9762\u8FD9\u5F20\u56FE\u5C31\u80FD\u5F88\u6E05\u6670\u5730\u770B\u51FA\u8C03\u7528\u6808\u3001\u4E8B\u4EF6\u961F\u5217\u4EE5\u53CA Eventloop \u548C\u5B83\u4EEC\u4E4B\u95F4\u76F8\u4E92\u914D\u5408\u7684\u5173\u7CFB\u3002 </p><p data-nodeid="1717"> \u90A3\u4E48\u770B\u5B8C\u4E86 JS \u5F15\u64CE\u7684\u5168\u5C40\u6D41\u7A0B\u56FE\uFF0C\u6211\u4EEC\u518D\u770B\u770B Eventloop \u7684\u5185\u90E8\u90FD\u6709\u54EA\u4E9B\u4E1C\u897F\u5462\uFF1F\u7B80\u5355\u6765\u8BF4 Eventloop \u901A\u8FC7\u5185\u90E8\u4E24\u4E2A\u961F\u5217\u6765\u5B9E\u73B0 Event Queue \u653E\u8FDB\u6765\u7684\u5F02\u6B65\u4EFB\u52A1\u3002\u4EE5 setTimeout \u4E3A\u4EE3\u8868\u7684\u4EFB\u52A1\u88AB\u79F0\u4E3A\u5B8F\u4EFB\u52A1\uFF0C\u653E\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\uFF08macrotask queue\uFF09\u4E2D\uFF1B\u800C\u4EE5 Promise\xA0\u4E3A\u4EE3\u8868\u7684\u4EFB\u52A1\u88AB\u79F0\u4E3A\u5FAE\u4EFB\u52A1\uFF0C\u653E\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF08microtask queue\uFF09\u4E2D\u3002\u6211\u4EEC\u6765\u770B\u4E00\u4E0B\u65E5\u5E38\u5DE5\u4F5C\u4E2D\u7ECF\u5E38\u9047\u5230\u7684\u54EA\u4E9B\u662F\u5B8F\u4EFB\u52A1\uFF0C\u54EA\u4E9B\u662F\u5FAE\u4EFB\u52A1\uFF0C\u5982\u4E0B\u6240\u793A\u3002 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> \u590D\u5236\u4EE3\u7801 </div><pre><code data-language="java"><ol><li><div class="code-word">macrotasks(\u5B8F\u4EFB\u52A1): \r
</div></li><li><div class="code-word">script(\u6574\u4F53\u4EE3\u7801),setTimeout,setInterval,setImmediate,I/O,UI rendering,<span class="hljs-function">event listner\r
</span></div></li><li><div class="code-word"><span class="hljs-title">microtasks</span><span class="hljs-params">(\u5FAE\u4EFB\u52A1)</span>: \r
</div></li><li><div class="code-word">process.nextTick, Promises, Object.observe, MutationObserver\r
</div></li></ol></code></pre></div><p data-nodeid="1719"> \u6211\u628A\u4E3B\u8981\u7684\u5B8F\u4EFB\u52A1\u548C\u5FAE\u4EFB\u52A1\u90FD\u5217\u4E86\u51FA\u6765\uFF0C\u5176\u5B9E Eventloop \u5728\u5904\u7406\u5B8F\u4EFB\u52A1\u548C\u5FAE\u4EFB\u52A1\u7684\u903B\u8F91\u5176\u5B9E\u8FD8\u662F\u6709\u4E9B\u4E0D\u4E00\u6837\u7684\uFF0C\u6267\u884C\u7684\u60C5\u51B5\u5927\u81F4\u5982\u4E0B\uFF1A </p><ol data-nodeid="1720"><li data-nodeid="1721"><p data-nodeid="1722"> JavaScript \u5F15\u64CE\u9996\u5148\u4ECE\u5B8F\u4EFB\u52A1\u961F\u5217\uFF08macrotask queue\uFF09\u4E2D\u53D6\u51FA\u7B2C\u4E00\u4E2A\u4EFB\u52A1\uFF1B </p></li><li data-nodeid="1723"><p data-nodeid="1724"> \u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u518D\u5C06\u5FAE\u4EFB\u52A1\uFF08microtask queue\uFF09\u4E2D\u7684\u6240\u6709\u4EFB\u52A1\u53D6\u51FA\uFF0C\u6309\u7167\u987A\u5E8F\u5206\u522B\u5168\u90E8\u6267\u884C\uFF08\u8FD9\u91CC\u5305\u62EC\u4E0D\u4EC5\u6307\u5F00\u59CB\u6267\u884C\u65F6\u961F\u5217\u91CC\u7684\u5FAE\u4EFB\u52A1\uFF09\uFF0C\u5982\u679C\u5728\u8FD9\u4E00\u6B65\u8FC7\u7A0B\u4E2D\u4EA7\u751F\u65B0\u7684\u5FAE\u4EFB\u52A1\uFF0C\u4E5F\u9700\u8981\u6267\u884C\uFF1B </p></li><li data-nodeid="1725"><p data-nodeid="1726"> \u7136\u540E\u518D\u4ECE\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u53D6\u4E0B\u4E00\u4E2A\uFF0C\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u518D\u6B21\u5C06 microtask queue \u4E2D\u7684\u5168\u90E8\u53D6\u51FA\uFF0C\u5FAA\u73AF\u5F80\u590D\uFF0C\u76F4\u5230\u4E24\u4E2A queue \u4E2D\u7684\u4EFB\u52A1\u90FD\u53D6\u5B8C\u3002 </p></li></ol><p data-nodeid="2151" class="te-preview-highlight"> \u603B\u7ED3\u8D77\u6765\u5C31\u662F\uFF1A<strong data-nodeid="2161">\u4E00\u6B21 Eventloop \u5FAA\u73AF\u4F1A\u5904\u7406\u4E00\u4E2A\u5B8F\u4EFB\u52A1\u548C\u6240\u6709\u8FD9\u6B21\u5FAA\u73AF\u4E2D\u4EA7\u751F\u7684\u5FAE\u4EFB\u52A1</strong>\u3002<br><img src="https://s0.lgstatic.com/i/image6/M00/17/45/CioPOWBHbTWAFHeGAAU2r3znzGU909.png" alt="\u5218\u70E8\u7684js.png" data-nodeid="2160"></p><p data-nodeid="1728"> \u5173\u4E8E\u5B8F\u4EFB\u52A1\u548C\u5FAE\u4EFB\u52A1\u6682\u65F6\u5148\u8BF4\u5230\u8FD9\u91CC\uFF0C\u66F4\u8BE6\u7EC6\u7684\u5185\u5BB9\u6211\u4F1A\u5728\u201C21 | \u5F15\u64CE\u8FDB\u9636\uFF08\u4E0A\uFF09\uFF1A\u63A2\u7A76\u5B8F\u4EFB\u52A1&amp;\u5FAE\u4EFB\u52A1\u7684\u8FD0\u884C\u673A\u5236\u201D\u4E2D\u8BE6\u7EC6\u8BB2\u89E3\u3002 </p><p data-nodeid="1729"> \u90A3\u4E48\u521D\u6B65\u770B\u5B8C\u4E86\u6D4F\u89C8\u5668\u4E2D Eventloop \u7684\u60C5\u51B5\uFF0C\u6211\u4EEC\u518D\u6765\u770B\u4E0B\u5728 Node.js \u670D\u52A1\u7AEF\u7684 Eventloop \u662F\u600E\u4E48\u8FD0\u4F5C\u7684\u3002 </p><h3 data-nodeid="1730">Node.js \u7684 Eventloop</h3><p data-nodeid="1731"> \u5173\u4E8E\u5728 Node.js \u670D\u52A1\u7AEF Eventloop\uFF0C<a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" data-nodeid="1836">Node.js \u5B98\u7F51</a>\u662F\u8FD9\u4E48\u63CF\u8FF0\u7684\uFF1A </p><blockquote data-nodeid="1732"><p data-nodeid="1733"><em data-nodeid="1841">When Node.js starts, it initializes the event loop, processes the provided input script (or drops into the REPL, which is not covered in this document) which may make async API calls, schedule timers, or call process.nextTick(), then begins processing the event loop.</em></p></blockquote><p data-nodeid="1734"> \u7B80\u5355\u7FFB\u8BD1\u8FC7\u6765\u5C31\u662F\uFF1A\u5F53 Node.js \u5F00\u59CB\u542F\u52A8\u65F6\uFF0C\u4F1A\u521D\u59CB\u5316\u4E00\u4E2A Eventloop\uFF0C\u5904\u7406\u8F93\u5165\u7684\u4EE3\u7801\u811A\u672C\uFF0C\u8FD9\u4E9B\u811A\u672C\u4F1A\u8FDB\u884C API \u5F02\u6B65\u8C03\u7528\uFF0Cprocess.nextTick() \u65B9\u6CD5\u4F1A\u5F00\u59CB\u5904\u7406\u4E8B\u4EF6\u5FAA\u73AF\u3002\u4E0B\u9762\u5C31\u662F Node.js \u5B98\u7F51\u63D0\u4F9B\u7684 Eventloop \u4E8B\u4EF6\u5FAA\u73AF\u53C2\u8003\u6D41\u7A0B\u3002 </p><p data-nodeid="1735"><img src="https://s0.lgstatic.com/i/image6/M00/17/46/Cgp9HWBHaxyAMv7yAAC2Vr6vRw4319.png" alt="\u56FE\u72471.png" data-nodeid="1845"></p><p data-nodeid="1736"> \u6574\u4E2A\u6D41\u7A0B\u5206\u4E3A\u516D\u4E2A\u9636\u6BB5\uFF0C\u5F53\u8FD9\u516D\u4E2A\u9636\u6BB5\u6267\u884C\u5B8C\u4E00\u6B21\u4E4B\u540E\uFF0C\u624D\u53EF\u4EE5\u7B97\u5F97\u4E0A\u6267\u884C\u4E86\u4E00\u6B21 Eventloop \u7684\u5FAA\u73AF\u8FC7\u7A0B\u3002\u6211\u4EEC\u6765\u5206\u522B\u770B\u4E0B\u8FD9\u516D\u4E2A\u9636\u6BB5\u90FD\u505A\u4E86\u54EA\u4E9B\u4E8B\u60C5\u3002 </p><ul data-nodeid="1737"><li data-nodeid="1738"><p data-nodeid="1739"><strong data-nodeid="1851">Timers \u9636\u6BB5</strong>\uFF1A\u8FD9\u4E2A\u9636\u6BB5\u6267\u884C setTimeout \u548C setInterval\u3002 </p></li><li data-nodeid="1740"><p data-nodeid="1741"><strong data-nodeid="1856">I/O callbacks \u9636\u6BB5</strong>\uFF1A\u8FD9\u4E2A\u9636\u6BB5\u4E3B\u8981\u6267\u884C\u7CFB\u7EDF\u7EA7\u522B\u7684\u56DE\u8C03\u51FD\u6570\uFF0C\u6BD4\u5982 TCP \u8FDE\u63A5\u5931\u8D25\u7684\u56DE\u8C03\u3002 </p></li><li data-nodeid="1742"><p data-nodeid="1743"><strong data-nodeid="1861">idle\uFF0Cprepare \u9636\u6BB5</strong>\uFF1A\u53EA\u662F Node.js \u5185\u90E8\u95F2\u7F6E\u3001\u51C6\u5907\uFF0C\u53EF\u4EE5\u5FFD\u7565\u3002 </p></li><li data-nodeid="1744"><p data-nodeid="1745"><strong data-nodeid="1866">poll \u9636\u6BB5</strong>\uFF1Apoll \u9636\u6BB5\u662F\u4E00\u4E2A\u91CD\u8981\u4E14\u590D\u6742\u7684\u9636\u6BB5\uFF0C\u51E0\u4E4E\u6240\u6709 I/O \u76F8\u5173\u7684\u56DE\u8C03\uFF0C\u90FD\u5728\u8FD9\u4E2A\u9636\u6BB5\u6267\u884C\uFF08\u9664\u4E86setTimeout\u3001setInterval\u3001setImmediate \u4EE5\u53CA\u4E00\u4E9B\u56E0\u4E3A exception \u610F\u5916\u5173\u95ED\u4EA7\u751F\u7684\u56DE\u8C03\uFF09\uFF0C\u8FD9\u4E2A\u9636\u6BB5\u7684\u4E3B\u8981\u6D41\u7A0B\u5982\u4E0B\u56FE\u6240\u793A\u3002 </p></li></ul><p data-nodeid="1746"><img src="https://s0.lgstatic.com/i/image6/M00/17/42/CioPOWBHawOAK71oAAFclaJ2RLA602.png" alt="\u56FE\u72472.png" data-nodeid="1869"></p><ul data-nodeid="1747"><li data-nodeid="1748"><p data-nodeid="1749"><strong data-nodeid="1874">check \u9636\u6BB5</strong>\uFF1A\u6267\u884C setImmediate() \u8BBE\u5B9A\u7684 callbacks\u3002 </p></li><li data-nodeid="1750"><p data-nodeid="1751"><strong data-nodeid="1883">close callbacks \u9636\u6BB5</strong>\uFF1A\u6267\u884C\u5173\u95ED\u8BF7\u6C42\u7684\u56DE\u8C03\u51FD\u6570\uFF0C\u6BD4\u5982 socket.on(&#39;close&#39;, ...)\u3002 </p></li></ul><p data-nodeid="1752"> \u9664\u4E86\u628A Eventloop \u7684\u5B8F\u4EFB\u52A1\u7EC6\u5206\u5230\u4E0D\u540C\u9636\u6BB5\u5916\u3002node \u8FD8\u5F15\u5165\u4E86\u4E00\u4E2A\u65B0\u7684\u4EFB\u52A1\u961F\u5217 Process.nextTick()\u3002\u6839\u636E<a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/#process-nexttick" data-nodeid="1887">\u5B98\u65B9\u6587\u6863\u7684\u89E3\u91CA</a>\uFF1A </p><blockquote data-nodeid="1753"><p data-nodeid="1754"> process.nextTick()is not technically part of the event loop. Instead, thenextTickQueuewill be processed after the current operation is completed, regardless of the current phase of the event loop. Here, an\xA0operation\xA0is defined as a transition from the underlying C/C++ handler, and handling the JavaScript that needs to be executed. </p></blockquote><p data-nodeid="1755"> \u53EF\u4EE5\u8BA4\u4E3A\uFF0CProcess.nextTick() \u4F1A\u5728\u4E0A\u8FF0\u5404\u4E2A\u9636\u6BB5\u7ED3\u675F\u65F6\uFF0C\u5728\u8FDB\u5165\u4E0B\u4E00\u4E2A\u9636\u6BB5\u4E4B\u524D\u7ACB\u5373\u6267\u884C\uFF08\u4F18\u5148\u7EA7\u751A\u81F3\u8D85\u8FC7 microtask \u961F\u5217\uFF09\u3002 </p><p data-nodeid="1756"> Node.js \u548C\u6D4F\u89C8\u5668\u7AEF\u5B8F\u4EFB\u52A1\u961F\u5217\u7684\u53E6\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u4E0D\u540C\u70B9\u662F\uFF0C\u6D4F\u89C8\u5668\u7AEF\u4EFB\u52A1\u961F\u5217\u6BCF\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u4EC5\u51FA\u961F\u4E00\u4E2A\u56DE\u8C03\u51FD\u6570\u63A5\u7740\u53BB\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\uFF1B\u800C Node.js \u7AEF\u53EA\u8981\u8F6E\u5230\u6267\u884C\u67D0\u4E2A\u5B8F\u4EFB\u52A1\u961F\u5217\uFF0C\u5219\u4F1A\u6267\u884C\u5B8C\u961F\u5217\u4E2D\u6240\u6709\u7684\u5F53\u524D\u4EFB\u52A1\uFF0C\u4F46\u662F\u5F53\u524D\u8F6E\u6B21\u65B0\u6DFB\u52A0\u5230\u961F\u5C3E\u7684\u4EFB\u52A1\u5219\u4F1A\u7B49\u5230\u4E0B\u4E00\u8F6E\u6B21\u624D\u4F1A\u6267\u884C\u3002 </p><p data-nodeid="1757"> \u8FD9\u90E8\u5206\u6BD4\u8F83\u7ED5\uFF0C\u4F60\u9700\u8981\u591A\u7422\u78E8\u51E0\u904D\u3002\u90A3\u4E48\u8BB2\u5B8C\u4E86 Eventloop\uFF0C\u4F60\u4EE5\u4E3A\u53EF\u80FD\u5C31\u591F\u7528\u4E86\uFF0C\u4F46\u662F\u5F88\u5FEB\u4F60\u5C31\u4F1A\u53D1\u73B0\uFF0CEventloop \u4E5F\u4F1A\u5F71\u54CD\u5230\u6E32\u67D3\uFF0C\u4E0B\u9762\u7684\u5185\u5BB9\u4E5F\u8BB8\u5BF9\u4F60\u6709\u5E2E\u52A9\u3002 </p><h3 data-nodeid="1758">EventLoop \u5BF9\u6E32\u67D3\u7684\u5F71\u54CD</h3><p data-nodeid="1759"> \u60F3\u5FC5\u4F60\u4E4B\u524D\u5728\u4E1A\u52A1\u5F00\u53D1\u4E2D\u4E5F\u9047\u5230\u8FC7 requestIdlecallback \u548C requestAnimationFrame\uFF0C\u8FD9\u4E24\u4E2A\u51FD\u6570\u5728\u6211\u4EEC\u4E4B\u524D\u7684\u5185\u5BB9\u4E2D\u6CA1\u6709\u8BB2\u8FC7\uFF0C\u4F46\u662F\u5F53\u4F60\u5F00\u59CB\u8003\u8651\u5B83\u4EEC\u5728 Eventloop \u7684\u751F\u547D\u5468\u671F\u7684\u54EA\u4E00\u6B65\u89E6\u53D1\uFF0C\u6216\u8005\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u7684\u56DE\u8C03\u4F1A\u5728\u5FAE\u4EFB\u52A1\u961F\u5217\u8FD8\u662F\u5B8F\u4EFB\u52A1\u961F\u5217\u6267\u884C\u7684\u65F6\u5019\uFF0C\u624D\u53D1\u73B0\u597D\u50CF\u6CA1\u6709\u60F3\u8C61\u4E2D\u90A3\u4E48\u7B80\u5355\u3002\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u5176\u5B9E\u4E5F\u5E76\u4E0D\u5C5E\u4E8E JS \u7684\u539F\u751F\u65B9\u6CD5\uFF0C\u800C\u662F\u6D4F\u89C8\u5668\u5BBF\u4E3B\u73AF\u5883\u63D0\u4F9B\u7684\u65B9\u6CD5\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u7275\u626F\u5230\u53E6\u4E00\u4E2A\u95EE\u9898\uFF1A\u6E32\u67D3\u3002 </p><p data-nodeid="1760"> \u6211\u4EEC\u77E5\u9053\u6D4F\u89C8\u5668\u4F5C\u4E3A\u4E00\u4E2A\u590D\u6742\u7684\u5E94\u7528\u662F\u591A\u7EBF\u7A0B\u5DE5\u4F5C\u7684\uFF0C\u9664\u4E86\u8FD0\u884C JS \u7684\u7EBF\u7A0B\u5916\uFF0C\u8FD8\u6709\u6E32\u67D3\u7EBF\u7A0B\u3001\u5B9A\u65F6\u5668\u89E6\u53D1\u7EBF\u7A0B\u3001HTTP \u8BF7\u6C42\u7EBF\u7A0B\uFF0C\u7B49\u7B49\u3002JS \u7EBF\u7A0B\u53EF\u4EE5\u8BFB\u53D6\u5E76\u4E14\u4FEE\u6539 DOM\uFF0C\u800C\u6E32\u67D3\u7EBF\u7A0B\u4E5F\u9700\u8981\u8BFB\u53D6 DOM\uFF0C\u8FD9\u662F\u4E00\u4E2A\u5178\u578B\u7684\u591A\u7EBF\u7A0B\u7ADE\u4E89\u4E34\u754C\u8D44\u6E90\u7684\u95EE\u9898\u3002\u6240\u4EE5\u6D4F\u89C8\u5668\u5C31\u628A\u8FD9\u4E24\u4E2A\u7EBF\u7A0B\u8BBE\u8BA1\u6210\u4E92\u65A5\u7684\uFF0C\u5373\u540C\u65F6\u53EA\u80FD\u6709\u4E00\u4E2A\u7EBF\u7A0B\u5728\u6267\u884C\u3002 </p><p data-nodeid="1761"> \u6E32\u67D3\u539F\u672C\u5C31\u4E0D\u5E94\u8BE5\u51FA\u73B0\u5728 Eventloop \u76F8\u5173\u7684\u77E5\u8BC6\u4F53\u7CFB\u91CC\uFF0C\u4F46\u662F\u56E0\u4E3A Eventloop \u663E\u7136\u662F\u5728\u8BA8\u8BBA JS \u5982\u4F55\u8FD0\u884C\u7684\u95EE\u9898\uFF0C\u800C\u6E32\u67D3\u5219\u662F\u6D4F\u89C8\u5668\u53E6\u5916\u4E00\u4E2A\u7EBF\u7A0B\u7684\u5DE5\u4F5C\u3002\u4F46\u662F <a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" data-nodeid="1899">requestAnimationFrame</a> \u7684\u51FA\u73B0\u5374\u628A\u8FD9\u4E24\u4EF6\u4E8B\u60C5\u7ED9\u5173\u8054\u8D77\u6765\uFF0C\u4F60\u53EF\u4EE5\u770B\u4E0B RAF \u7684\u82F1\u6587\u89E3\u91CA\uFF1A </p><blockquote data-nodeid="1762"><p data-nodeid="1763"><code data-backticks="1" data-nodeid="1901">requestAnimationFrame()</code>method tells the browser that you wish to perform an animation and requests that the browser calls a specified function to update an animation\xA0before the next repaint. </p></blockquote><p data-nodeid="1764"> \u901A\u8FC7\u8C03\u7528 requestAnimationFrame \u6211\u4EEC\u53EF\u4EE5\u5728\u4E0B\u6B21\u6E32\u67D3\u4E4B\u524D\u6267\u884C\u56DE\u8C03\u51FD\u6570\u3002\u90A3\u4E0B\u6B21\u6E32\u67D3\u5177\u4F53\u662F\u54EA\u4E2A\u65F6\u95F4\u70B9\u5462\uFF1F\u6E32\u67D3\u548C Eventloop \u6709\u4EC0\u4E48\u5173\u7CFB\u5462\uFF1F\u6211\u4EEC\u5728 <a href="https://html.spec.whatwg.org/multipage/webappapis.html#rendering-opportunity" data-nodeid="1906">HTML\u534F\u8BAE\u5BF9 Eventloop \u7684\u89C4\u8303</a> \u91CC\u627E\u5230\u4E86\u7B54\u6848\u3002\u7B80\u5355\u6765\u8BF4\uFF0C\u5C31\u662F\u5728\u6BCF\u4E00\u6B21 Eventloop \u7684\u672B\u5C3E\uFF0C\u5224\u65AD\u5F53\u524D\u9875\u9762\u662F\u5426\u5904\u4E8E\u6E32\u67D3\u65F6\u673A\uFF0C\u5C31\u662F\u91CD\u65B0\u6E32\u67D3\u3002\u800C\u8FD9\u4E2A\u6240\u8C13\u7684\u6E32\u67D3\u65F6\u673A\u662F\u8FD9\u6837\u5B9A\u4E49\u7684\uFF1A </p><blockquote data-nodeid="1765"><p data-nodeid="1766"> Rendering opportunities are determined based on hardware constraints such as display refresh rates and other factors such as page performance or whether the page is in the background. Rendering opportunities typically occur at regular intervals. </p></blockquote><p data-nodeid="1767"> \u6709\u5C4F\u5E55\u7684\u786C\u4EF6\u9650\u5236\uFF0C\u6BD4\u5982 60Hz \u5237\u65B0\u7387\uFF0C\u7B80\u800C\u8A00\u4E4B\u5C31\u662F 1 \u79D2\u5237\u65B0\u4E86 60 \u6B21\uFF0C16.6ms \u5237\u65B0\u4E00\u6B21\u3002\u8FD9\u4E2A\u65F6\u5019\u6D4F\u89C8\u5668\u7684\u6E32\u67D3\u95F4\u9694\u65F6\u95F4\u5C31\u6CA1\u5FC5\u8981\u5C0F\u4E8E 16.6ms\uFF0C\u56E0\u4E3A\u5C31\u7B97\u6E32\u67D3\u4E86\u5C4F\u5E55\u4E0A\u4E5F\u770B\u4E0D\u5230\u3002\u5F53\u7136\u6D4F\u89C8\u5668\u4E5F\u4E0D\u80FD\u4FDD\u8BC1\u4E00\u5B9A\u4F1A\u6BCF 16.6ms \u4F1A\u6E32\u67D3\u4E00\u6B21\uFF0C\u56E0\u4E3A\u8FD8\u4F1A\u53D7\u5230\u5904\u7406\u5668\u7684\u6027\u80FD\u3001JavaScript \u6267\u884C\u6548\u7387\u7B49\u5176\u4ED6\u56E0\u7D20\u5F71\u54CD\u3002 </p><p data-nodeid="1768"> \u56DE\u5230 requestAnimationFrame\uFF0C\u8FD9\u4E2A API \u4FDD\u8BC1\u5728\u4E0B\u6B21\u6D4F\u89C8\u5668\u6E32\u67D3\u4E4B\u524D\u4E00\u5B9A\u4F1A\u88AB\u8C03\u7528\uFF0C\u5B9E\u9645\u4E0A\u6211\u4EEC\u5B8C\u5168\u53EF\u4EE5\u628A\u5B83\u770B\u6210\u662F\u4E00\u4E2A\u9AD8\u7EA7\u7248\u7684 setInterval\u3002\u5B83\u4EEC\u90FD\u662F\u5728\u4E00\u6BB5\u65F6\u95F4\u540E\u6267\u884C\u56DE\u8C03\uFF0C\u4F46\u662F\u524D\u8005\u7684\u95F4\u9694\u65F6\u95F4\u662F\u7531\u6D4F\u89C8\u5668\u81EA\u5DF1\u4E0D\u65AD\u8C03\u6574\u7684\uFF0C\u800C\u540E\u8005\u53EA\u80FD\u7531\u7528\u6237\u6307\u5B9A\u3002\u8FD9\u6837\u7684\u7279\u6027\u4E5F\u51B3\u5B9A\u4E86 requestAnimationFrame \u66F4\u9002\u5408\u7528\u6765\u505A\u9488\u5BF9\u6BCF\u4E00\u5E27\u6765\u4FEE\u6539\u7684\u52A8\u753B\u6548\u679C\u3002 </p><p data-nodeid="1769"> \u5F53\u7136 requestAnimationFrame \u4E0D\u662F Eventloop \u91CC\u7684\u5B8F\u4EFB\u52A1\uFF0C\u6216\u8005\u8BF4\u5B83\u5E76\u4E0D\u5728 Eventloop \u7684\u751F\u547D\u5468\u671F\u91CC\uFF0C\u53EA\u662F\u6D4F\u89C8\u5668\u53C8\u5F00\u653E\u7684\u4E00\u4E2A\u5728\u6E32\u67D3\u4E4B\u524D\u53D1\u751F\u7684\u65B0\u7684 hook\u3002\u53E6\u5916\u9700\u8981\u6CE8\u610F\u7684\u662F\u5FAE\u4EFB\u52A1\u7684\u8BA4\u77E5\u6982\u5FF5\u4E5F\u9700\u8981\u66F4\u65B0\uFF0C\u5728\u6267\u884C animation callback \u65F6\u4E5F\u6709\u53EF\u80FD\u4EA7\u751F\u5FAE\u4EFB\u52A1\uFF08\u6BD4\u5982 promise \u7684 callback\uFF09\uFF0C\u4F1A\u653E\u5230 animation queue \u5904\u7406\u5B8C\u540E\u518D\u6267\u884C\u3002\u6240\u4EE5\u5FAE\u4EFB\u52A1\u5E76\u4E0D\u662F\u50CF\u4E4B\u524D\u8BF4\u7684\u90A3\u6837\u5728\u6BCF\u4E00\u8F6E Eventloop \u540E\u5904\u7406\uFF0C\u800C\u662F\u5728 JS \u7684\u51FD\u6570\u8C03\u7528\u6808\u6E05\u7A7A\u540E\u5904\u7406\u3002 </p><p data-nodeid="1770"> \u4F46\u662F requestIdlecallback\xA0\u5374\u662F\u4E00\u4E2A\u66F4\u597D\u7406\u89E3\u7684\u6982\u5FF5\u3002\u5F53\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u6CA1\u6709\u4EFB\u52A1\u53EF\u4EE5\u5904\u7406\u65F6\uFF0C\u6D4F\u89C8\u5668\u53EF\u80FD\u5B58\u5728\u201C\u7A7A\u95F2\u72B6\u6001\u201D\u3002\u8FD9\u6BB5\u7A7A\u95F2\u65F6\u95F4\u53EF\u4EE5\u88AB requestIdlecallback \u5229\u7528\u8D77\u6765\u6267\u884C\u4E00\u4E9B\u4F18\u5148\u7EA7\u4E0D\u9AD8\u3001\u4E0D\u5FC5\u7ACB\u5373\u6267\u884C\u7684\u4EFB\u52A1\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A </p><p data-nodeid="1771"><img src="https://s0.lgstatic.com/i/image6/M01/17/45/Cgp9HWBHavCAdApzAACc58yaa0Q304.png" alt="\u56FE\u72473.png" data-nodeid="1915"></p><p data-nodeid="1772"> \u5F53\u7136\u4E3A\u4E86\u9632\u6B62\u6D4F\u89C8\u5668\u4E00\u76F4\u5904\u4E8E\u7E41\u5FD9\u72B6\u6001\uFF0C\u5BFC\u81F4 requestIdlecallback \u53EF\u80FD\u6C38\u8FDC\u65E0\u6CD5\u6267\u884C\u56DE\u8C03\uFF0C\u5B83\u8FD8\u63D0\u4F9B\u4E86\u4E00\u4E2A\u989D\u5916\u7684 timeout \u53C2\u6570\uFF0C\u4E3A\u8FD9\u4E2A\u4EFB\u52A1\u8BBE\u7F6E\u4E00\u4E2A\u622A\u6B62\u65F6\u95F4\u3002\u6D4F\u89C8\u5668\u5C31\u53EF\u4EE5\u6839\u636E\u8FD9\u4E2A\u622A\u6B62\u65F6\u95F4\u89C4\u5212\u8FD9\u4E2A\u4EFB\u52A1\u7684\u6267\u884C\u3002 </p><h3 data-nodeid="1773">\u603B\u7ED3</h3><p data-nodeid="1774"> \u90A3\u4E48\u73B0\u5728\u8BA9\u4F60\u56DE\u7B54\u6211\u5728\u5F00\u5934\u63D0\u51FA\u7684\u4E24\u4E2A\u95EE\u9898\uFF0C\u4F60\u80FD\u51C6\u786E\u8BF4\u51FA\u6765\u5417\uFF1F\u56DE\u8FC7\u5934\u5230\u6587\u4E2D\u4ED4\u7EC6\u770B\u770B\uFF0C\u76F8\u4FE1\u4E0D\u96BE\u56DE\u7B54\u3002 </p><p data-nodeid="1775"> \u5230\u8FD9\u91CC\uFF0C\u4F60\u57FA\u672C\u5C31\u80FD\u7406\u89E3 Eventloop \u5728\u4E0D\u540C\u7684\u7AEF\u4E0A\u7684\u60C5\u51B5\u4E86\u3002\u867D\u7136\u8BF4 Eventloop \u672C\u8EAB\u5E76\u4E0D\u662F\u4E00\u4E2A\u96BE\u7406\u89E3\u7684\u6982\u5FF5\uFF0C\u4F46\u662F\u7531\u4E8E JS \u4E0D\u540C\u5E73\u53F0\u7684\u5B9E\u73B0\u7684\u5DEE\u5F02\uFF0C\u8BA9\u8FD9\u4E2A\u77E5\u8BC6\u70B9\u5F88\u96BE\u4E00\u4E0B\u8BF4\u6E05\u695A\uFF0C\u56E0\u6B64\u6211\u5C31\u62FF\u51FA\u8FD9\u4E00\u8BB2\u5E26\u4F60\u6765\u5206\u6790 Eventloop\u3002\u5E0C\u671B\u4F60\u53EF\u4EE5\u53CD\u590D\u7422\u78E8\u8FD9\u4E00\u6982\u5FF5\uFF0C\u5C06\u5B83\u7406\u89E3\u900F\u5F7B\u3002 </p><p data-nodeid="1776" class=""> \u4E0B\u4E00\u8BB2\u6211\u4EEC\u6765\u804A\u804A JS \u7684\u4EE3\u7801\u662F\u5982\u4F55\u88AB\u7F16\u8BD1\u6267\u884C\u7684\u3002\u5982\u679C\u672C\u8BB2\u7684\u5185\u5BB9\u5BF9\u4F60\u6709\u5E2E\u52A9\uFF0C\u5C31\u7559\u8A00\u548C\u6211\u8BF4\u8BF4\u4F60\u7684\u5B66\u4E60\u611F\u609F\u5427\u3002\u6211\u4EEC\u4E0B\u4E00\u8BB2\u518D\u89C1\u3002 </p></div></div>`,1),v=[p,l,r,c];function u(g,h){return a(),t("div",s,v)}var k=i(n,[["render",u]]);export{k as default};
