<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>08 | 数组原理（中）：如何理解 JS 的类数组？ | </title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app.7723def3.js"><link rel="modulepreload" href="/assets/8.html.28d5ea6b.js"><link rel="modulepreload" href="/assets/8.html.dfb80989.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.39d5bbe5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">08 | 数组原理（中）：如何理解 JS 的类数组？ <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><div data-v-1605a430><h1 data-v-1605a430="" class="main-title"> 08 | 数组原理（中）：如何理解 JS 的类数组？ </h1><div data-v-1605a430="" class="main-tips"> 2021/02/01 <span data-v-1605a430="" class="auth">若离</span></div><div data-v-1605a430="" class="media-player-wrap"><div data-v-6ecd2302="" data-v-1605a430=""><div data-v-6ecd2302="" class="media-container"><div data-v-6ecd2302="" class="button-wrap inline-block"><div data-v-6ecd2302="" class="button-icon inline-block"></div></div><div data-v-6ecd2302="" class="data-wrap inline-block"><div data-v-6ecd2302="" class="progress-bar"><div class="vue-slider vue-slider-ltr" style="padding:7px 0px;width:auto;height:4px;"><div class="vue-slider-rail" style="height:2px;background:rgb(213, 218, 223);border-radius:1.5px;"><div class="vue-slider-process" style="height:100%;top:0px;left:0%;width:0%;transition-property:width, left;transition-duration:0.5s;background:rgb(252, 215, 102);"></div><div aria-valuetext="00:00/09:54" class="vue-slider-dot vue-slider-dot-hover" role="slider" aria-valuenow="0" aria-valuemin="0" aria-valuemax="594" aria-orientation="horizontal" tabindex="0" style="width:14px;height:14px;transform:translate(-50%, -50%);top:50%;left:0%;transition:left 0.5s ease 0s;"><div class="vue-slider-dot-handle" style="width:16px;height:16px;background:rgb(252, 215, 102);box-shadow:none;margin-top:-1px;z-index:1;"></div><div class="vue-slider-dot-tooltip vue-slider-dot-tooltip-top"><div class="vue-slider-dot-tooltip-inner vue-slider-dot-tooltip-inner-top" style="padding:2px 12px;border-radius:14px;font-size:14px;color:rgb(0, 0, 0);background:rgb(252, 215, 102);min-width:20px;border-color:rgb(252, 215, 102);"><span class="vue-slider-dot-tooltip-text">00:00/09:54</span></div></div></div></div></div></div><div data-v-6ecd2302="" class="detail-wrap"><div data-v-6ecd2302="" class="detail-one">25.83M</div><div data-v-6ecd2302="" class="detail-two">00:00/09:54</div></div></div><div data-v-6ecd2302="" class="division-line inline-block"></div><div data-v-6ecd2302="" class="viedo-wrap inline-block"><div data-v-6ecd2302="" class="viedo-icon"></div><div data-v-6ecd2302="" class="text">看视频</div></div></div></div></div><div data-v-1605a430="" class="main-container"><div data-v-1605a430="" class="rich-text-wrap"><p data-nodeid="869" class=""> 我在上一讲带你梳理了数组那令人眼花缭乱的各种方法，其实 JS 中一直存在一种类数组的对象，它们不能直接调用数组的方法，但是又和数组比较类似，在某些特定的编程场景中会出现，这会让很多 JS 的初学者比较困惑。那么通过本讲的学习，希望你能更好地去理解类数组原理，以及类数组的转换。 </p><p data-nodeid="870"> 我们先来看看在 JavaScript 中有哪些情况下的对象是类数组呢？主要有以下几种： </p><ol data-nodeid="871"><li data-nodeid="872"><p data-nodeid="873">函数里面的参数对象 arguments；</p></li><li data-nodeid="874"><p data-nodeid="875"> 用 getElementsByTagName/ClassName/Name 获得的 HTMLCollection； </p></li><li data-nodeid="876"><p data-nodeid="877">用 querySelector 获得的 NodeList。</p></li></ol><p data-nodeid="878"> 上述这些基本就是你在 JavaScript 编程过程中经常会遇到的，希望通过这一讲，你能够彻底掌握它们。 </p><p data-nodeid="879">在课程开始前请你先思考几个问题：</p><ol data-nodeid="880"><li data-nodeid="881"><p data-nodeid="882">类数组是否能使用数组的方法呢？</p></li><li data-nodeid="883"><p data-nodeid="884">类数组有哪些方式可以转换成数组？</p></li></ol><p data-nodeid="885"> 如果你不能准确地回答出这两个问题，那么就要认真学习了，下面开始进入我们的课程。 </p><h3 data-nodeid="886">类数组基本介绍</h3><h4 data-nodeid="887">arguments</h4><p data-nodeid="888"> 先来重点讲讲 arguments 对象，我们在日常开发中经常会遇到各种类数组对象，最常见的便是在函数中使用的 arguments，它的对象只定义在函数体中，包括了函数的参数和其他属性。我们通过一段代码来看下 arguments 的使用方法，如下所示。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">name, age, sex</span>) </span>{
</div></li><li><div class="code-word">    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>);
</div></li><li><div class="code-word">    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">arguments</span>);
</div></li><li><div class="code-word">    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-built_in">arguments</span>));
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">foo(<span class="hljs-string">&#39;jack&#39;</span>, <span class="hljs-string">&#39;18&#39;</span>, <span class="hljs-string">&#39;male&#39;</span>);
</div></li></ol></code></pre></div><p data-nodeid="890"> 这段代码比较容易，就是直接将这个函数的 arguments 在函数内部打印出来，那么我们看下这个 arguments 打印出来的结果，请看控制台的这张截图。 </p><p data-nodeid="891"><img src="https://s0.lgstatic.com/i/image/M00/92/B6/CgqCHmASb-KAQewJAACk1n_5Leg936.png" alt="Drawing 0.png" data-nodeid="987"></p><p data-nodeid="892"> 从结果中可以看到，typeof 这个 arguments 返回的是 object，通过 Object.prototype.toString.call 返回的结果是 &#39;[object arguments]&#39;，可以看出来返回的不是 &#39;[object array]&#39;，说明 arguments 和数组还是有区别的。 </p><p data-nodeid="893"> length 属性很好理解，它就是函数参数的长度，我们从打印出的代码也可以看得出来。另外可以看到 arguments 不仅仅有一个 length 属性，还有一个 callee 属性，我们接下来看看这个 callee 是干什么的，代码如下所示。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">name, age, sex</span>) </span>{
</div></li><li><div class="code-word">    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>.callee);
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">foo(<span class="hljs-string">&#39;jack&#39;</span>, <span class="hljs-string">&#39;18&#39;</span>, <span class="hljs-string">&#39;male&#39;</span>);
</div></li></ol></code></pre></div><p data-nodeid="895">请看这段代码的执行结果。</p><p data-nodeid="896"><img src="https://s0.lgstatic.com/i/image/M00/92/AB/Ciqc1GASb-6AIWzeAAApfkowKxg460.png" alt="Drawing 1.png" data-nodeid="1005"></p><p data-nodeid="897"> 从控制台可以看到，输出的就是函数自身，如果在函数内部直接执行调用 callee 的话，那它就会不停地执行当前函数，直到执行到内存溢出，有兴趣的话你可以自己试一下。 </p><p data-nodeid="898">接下来我们再看看下面这种类数组。</p><h4 data-nodeid="899">HTMLCollection</h4><p data-nodeid="900"> HTMLCollection 简单来说是 HTML DOM 对象的一个接口，这个接口包含了获取到的 DOM 元素集合，返回的类型是类数组对象，如果用 typeof 来判断的话，它返回的是 &#39;object&#39;。它是及时更新的，当文档中的 DOM 变化时，它也会随之变化。 </p><p data-nodeid="901"> 描述起来比较抽象，还是通过一段代码来看下 HTMLCollection 最后返回的是什么，我们先随便找一个页面中<strong data-nodeid="1019">有 form 表单</strong>的页面，在控制台中执行下述代码。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-keyword">var</span> elem1, elem2;
</div></li><li><div class="code-word"><span class="hljs-comment">// document.forms 是一个 HTMLCollection</span>
</div></li><li><div class="code-word">elem1 = <span class="hljs-built_in">document</span>.forms[<span class="hljs-number">0</span>];
</div></li><li><div class="code-word">elem2 = <span class="hljs-built_in">document</span>.forms.item(<span class="hljs-number">0</span>);
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(elem1);
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(elem2);
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> elem1);
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.prototype.toString.call(elem1));
</div></li></ol></code></pre></div><p data-nodeid="903"> 在这个有 form 表单的页面执行上面的代码，得到的结果如下。 </p><p data-nodeid="904"><img src="https://s0.lgstatic.com/i/image/M00/92/AB/Ciqc1GASb_aAIALvAABrmMnCsmM219.png" alt="Drawing 2.png" data-nodeid="1023"><br> 可以看到，这里打印出来了页面第一个 form 表单元素，同时也打印出来了判断类型的结果，说明打印的判断的类型和 arguments 返回的也比较类似，typeof 返回的都是 &#39;object&#39;，和上面的类似。 </p><p data-nodeid="905"> 另外需要注意的一点就是 HTML DOM 中的 HTMLCollection 是即时更新的，当其所包含的文档结构发生改变时，它会自动更新。下面我们再看最后一个 NodeList 类数组。 </p><h4 data-nodeid="906">NodeList</h4><p data-nodeid="907"> NodeList 对象是节点的集合，通常是由 querySlector 返回的。NodeList 不是一个数组，也是一种类数组。虽然 NodeList 不是一个数组，但是可以使用 for...of 来迭代。在一些情况下，NodeList 是一个实时集合，也就是说，如果文档中的节点树发生变化，NodeList 也会随之变化。我们还是利用代码来理解一下 Nodelist 这种类数组。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-keyword">var</span> list = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&#39;input[type=checkbox]&#39;</span>);
</div></li><li><div class="code-word"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> checkbox <span class="hljs-keyword">of</span> list) {
</div></li><li><div class="code-word">  checkbox.checked = <span class="hljs-literal">true</span>;
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(list);
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> list);
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.prototype.toString.call(list));
</div></li></ol></code></pre></div><p data-nodeid="909"> 从上面的代码执行的结果中可以发现，我们是通过有 CheckBox 的页面执行的代码，在结果可中输出了一个 NodeList 类数组，里面有一个 CheckBox 元素，并且我们判断了它的类型，和上面的 arguments 与 HTMLCollection 其实是类似的，执行结果如下图所示。 </p><p data-nodeid="910"><img src="https://s0.lgstatic.com/i/image/M00/92/B6/CgqCHmAScACATLmOAABMWBjjtBc436.png" alt="Drawing 3.png" data-nodeid="1036"></p><p data-nodeid="911"> 好了，现在你已经了解了上面这三种类数组，那么结合这些，我们再看看类数组有哪些应用的场景呢？ </p><h3 data-nodeid="912">类数组应用场景</h3><p data-nodeid="913">我在这里为你介绍三种场景，这些也是最常见的。</p><h4 data-nodeid="914">遍历参数操作</h4><p data-nodeid="915"> 我们在函数内部可以直接获取 arguments 这个类数组的值，那么也可以对于参数进行一些操作，比如下面这段代码，我们可以将函数的参数默认进行求和操作。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"></span>) </span>{
</div></li><li><div class="code-word">    <span class="hljs-keyword">var</span> sum =<span class="hljs-number">0</span>,
</div></li><li><div class="code-word">        len = <span class="hljs-built_in">arguments</span>.length;
</div></li><li><div class="code-word">    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++){
</div></li><li><div class="code-word">        sum += <span class="hljs-built_in">arguments</span>[i];
</div></li><li><div class="code-word">    }
</div></li><li><div class="code-word">    <span class="hljs-keyword">return</span> sum;
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">add()                           <span class="hljs-comment">// 0</span>
</div></li><li><div class="code-word">add(<span class="hljs-number">1</span>)                          <span class="hljs-comment">// 1</span>
</div></li><li><div class="code-word">add(<span class="hljs-number">1</span>，<span class="hljs-number">2</span>)                       <span class="hljs-comment">// 3</span>
</div></li><li><div class="code-word">add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>);                   <span class="hljs-comment">// 10</span>
</div></li></ol></code></pre></div><p data-nodeid="917"> 结合上面这段代码，我们在函数内部可以将参数直接进行累加操作，以达到预期的效果，参数多少也可以不受限制，根据长度直接计算，返回出最后函数的参数的累加结果，其他的操作也都可以仿照这样的方式来做。我们再看下一种场景。 </p><h4 data-nodeid="918">定义链接字符串函数</h4><p data-nodeid="919"> 我们可以通过 arguments 这个例子定义一个函数来连接字符串。这个函数唯一正式声明了的参数是一个字符串，该参数指定一个字符作为衔接点来连接字符串。该函数定义如下。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myConcat</span>(<span class="hljs-params">separa</span>) </span>{
</div></li><li><div class="code-word">  <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
</div></li><li><div class="code-word">  <span class="hljs-keyword">return</span> args.join(separa);
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">myConcat(<span class="hljs-string">&quot;, &quot;</span>, <span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>);
</div></li><li><div class="code-word"><span class="hljs-comment">// &quot;red, orange, blue&quot;</span>
</div></li><li><div class="code-word">myConcat(<span class="hljs-string">&quot;; &quot;</span>, <span class="hljs-string">&quot;elephant&quot;</span>, <span class="hljs-string">&quot;lion&quot;</span>, <span class="hljs-string">&quot;snake&quot;</span>);
</div></li><li><div class="code-word"><span class="hljs-comment">// &quot;elephant; lion; snake&quot;</span>
</div></li><li><div class="code-word">myConcat(<span class="hljs-string">&quot;. &quot;</span>, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>);
</div></li><li><div class="code-word"><span class="hljs-comment">// &quot;one. two. three. four. five&quot;</span>
</div></li></ol></code></pre></div><p data-nodeid="921"> 这段代码说明了，你可以传递任意数量的参数到该函数，并使用每个参数作为列表中的项创建列表进行拼接。从这个例子中也可以看出，我们可以在日常编码中采用这样的代码抽象方式，把需要解决的这一类问题，都抽象成通用的方法，来提升代码的可复用性。 </p><p data-nodeid="922">下面我们再看另外一种使用场景。</p><h4 data-nodeid="923">传递参数使用</h4><p data-nodeid="924"> 我在第 4 讲中已经介绍过了 apply 和 call 的使用访问，结合这一讲的内容，我们来研究一下，如果再结合 arguments，还能实现什么？可以借助 arguments 将参数从一个函数传递到另一个函数，请看下面这个例子。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-comment">// 使用 apply 将 foo 的参数传递给 bar</span>
</div></li><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{
</div></li><li><div class="code-word">    bar.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params">a, b, c</span>) </span>{
</div></li><li><div class="code-word">   <span class="hljs-built_in">console</span>.log(a, b, c);
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">foo(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)   <span class="hljs-comment">//1 2 3</span>
</div></li></ol></code></pre></div><p data-nodeid="926"> 上述代码中，通过在 foo 函数内部调用 apply 方法，用 foo 函数的参数传递给 bar 函数，这样就实现了借用参数的妙用。你可以结合这个例子再思考一下，对于 foo 这样的函数可以灵活传入参数数量，通过这样的代码编写方式是不是也可以实现一些功能的拓展场景呢？ </p><h3 data-nodeid="927">如何将类数组转换成数组</h3><p data-nodeid="928"> 在互联网大厂的面试中，类数组转换成数组这样的题目经常会问，也会问你 arguments 的相关问题，那么结合本讲的内容，下面我带你思考一下如何将类数组转换为数组。大致的实现方式有两种，我将依次讲解。 </p><h4 data-nodeid="929">类数组借用数组方法转数组</h4><p data-nodeid="930"> apply 和 call 方法之前我们有详细讲过，类数组因为不是真正的数组，所以没有数组类型上自带的那些方法，我们就需要利用下面这几个方法去借用数组的方法。比如借用数组的 push 方法，请看下面的一段代码。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-keyword">var</span> arrayLike = { 
</div></li><li><div class="code-word">  <span class="hljs-number">0</span>: <span class="hljs-string">&#39;java&#39;</span>,
</div></li><li><div class="code-word">  <span class="hljs-number">1</span>: <span class="hljs-string">&#39;script&#39;</span>,
</div></li><li><div class="code-word">  <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>
</div></li><li><div class="code-word">} 
</div></li><li><div class="code-word"><span class="hljs-built_in">Array</span>.prototype.push.call(arrayLike, <span class="hljs-string">&#39;jack&#39;</span>, <span class="hljs-string">&#39;lily&#39;</span>); 
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> arrayLike); <span class="hljs-comment">// &#39;object&#39;</span>
</div></li><li><div class="code-word"><span class="hljs-built_in">console</span>.log(arrayLike);
</div></li><li><div class="code-word"><span class="hljs-comment">// {0: &quot;java&quot;, 1: &quot;script&quot;, 2: &quot;jack&quot;, 3: &quot;lily&quot;, length: 4}</span>
</div></li></ol></code></pre></div><p data-nodeid="932"> 从中可以看到，arrayLike 其实是一个对象，模拟数组的一个类数组，从数据类型上说它是一个对象，新增了一个 length 的属性。从代码中还可以看出，用 typeof 来判断输出的是 &#39;object&#39;，它自身是不会有数组的 push 方法的，这里我们就用 call 的方法来借用 Array 原型链上的 push 方法，可以实现一个类数组的 push 方法，给 arrayLike 添加新的元素。 </p><p data-nodeid="933"> 从控制台的结果可以看出，数组的 push 方法满足了我们想要实现添加元素的诉求。我们再来看下 arguments 如何转换成数组，请看下面这段代码。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a, b</span>) </span>{
</div></li><li><div class="code-word">  <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);
</div></li><li><div class="code-word"> <span class="hljs-comment">// let args = [].slice.call(arguments); // 这样写也是一样效果</span>
</div></li><li><div class="code-word">  <span class="hljs-built_in">console</span>.log(args.reduce(<span class="hljs-function">(<span class="hljs-params">sum, cur</span>) =&gt;</span> sum + cur));
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// 3</span>
</div></li><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a, b</span>) </span>{
</div></li><li><div class="code-word">  <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">Array</span>.prototype.concat.apply([], <span class="hljs-built_in">arguments</span>);
</div></li><li><div class="code-word">  <span class="hljs-built_in">console</span>.log(args.reduce(<span class="hljs-function">(<span class="hljs-params">sum, cur</span>) =&gt;</span> sum + cur));
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// 3</span>
</div></li></ol></code></pre></div><p data-nodeid="935"> 这段代码中可以看到，还是借用 Array 原型链上的各种方法，来实现 sum 函数的参数相加的效果。一开始都是将 arguments 通过借用数组的方法转换为真正的数组，最后都又通过数组的 reduce 方法实现了参数转化的真数组 args 的相加，最后返回预期的结果。 </p><h4 data-nodeid="936">ES6 的方法转数组</h4><p data-nodeid="937"> 对于类数组转换成数组的方式，我们还可以采用 ES6 新增的 Array.from 方法以及展开运算符的方法。那么还是围绕上面这个 sum 函数来进行改变，我们看下用 Array.from 和展开运算符是怎么实现转换数组的，请看下面一段代码的例子。 </p><div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div> 复制代码 </div><pre><code data-language="javascript"><ol><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a, b</span>) </span>{
</div></li><li><div class="code-word">  <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">arguments</span>);
</div></li><li><div class="code-word">  <span class="hljs-built_in">console</span>.log(args.reduce(<span class="hljs-function">(<span class="hljs-params">sum, cur</span>) =&gt;</span> sum + cur));
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);    <span class="hljs-comment">// 3</span>
</div></li><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a, b</span>) </span>{
</div></li><li><div class="code-word">  <span class="hljs-keyword">let</span> args = [...arguments];
</div></li><li><div class="code-word">  <span class="hljs-built_in">console</span>.log(args.reduce(<span class="hljs-function">(<span class="hljs-params">sum, cur</span>) =&gt;</span> sum + cur));
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);    <span class="hljs-comment">// 3</span>
</div></li><li><div class="code-word"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">...args</span>) </span>{
</div></li><li><div class="code-word">  <span class="hljs-built_in">console</span>.log(args.reduce(<span class="hljs-function">(<span class="hljs-params">sum, cur</span>) =&gt;</span> sum + cur));
</div></li><li><div class="code-word">}
</div></li><li><div class="code-word">sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);    <span class="hljs-comment">// 3</span>
</div></li></ol></code></pre></div><p data-nodeid="939"> 从代码中可以看出，Array.from 和 ES6 的展开运算符，都可以把 arguments 这个类数组转换成数组 args，从而实现调用 reduce 方法对参数进行累加操作。其中第二种和第三种都是用 ES6 的展开运算符，虽然写法不一样，但是基本都可以满足多个参数实现累加的效果。 </p><p data-nodeid="940"> 讲到这里你可以再思考一下这两种类数组转换数组的方法，是不是很好理解呢？ </p><h3 data-nodeid="941">总结</h3><p data-nodeid="942"> 在这一讲中，我把日常开发中有可能遇到的几种类数组分别介绍了一遍，又结合类数组相关的应用场景进行了全方位的讲解，类数组应用场景的几个例子希望能为你的 JS 编码能力的提升带来帮助和启发。最后我又讲了类数组转换成数组的两种方式。 </p><p data-nodeid="943"> 综上你可以看到，类数组这节课的知识点与第 4 讲中 apply、call 还是有紧密联系的，你可以通过下面的表格再重新梳理一下类数组和数组的异同点。 </p><p data-nodeid="1086" class="te-preview-highlight"><img src="https://s0.lgstatic.com/i/image2/M01/0B/01/Cip5yGATsruASQJ4AACaWT-dhLQ096.png" alt="Lark20210129-150051.png" data-nodeid="1089"></p><p data-nodeid="968"> 在前端工作中，开发者往往会忽视对类数组的学习，其实在高级 JavaScript 编程中经常需要将类数组向数组转化，尤其是一些比较复杂的开源项目，经常会看到函数中处理参数的写法，例如：[].slice.call(arguments) 这行代码。 </p><p data-nodeid="969"> 通过本讲的学习，希望你以后在阅读别人代码的时候，能更清楚地理解高手们处理类数组的逻辑，以便在面试或者编码中能够轻松应对。 </p><p data-nodeid="970" class=""> 下一讲，我们来聊聊数组扁平化的相关内容，欢迎提前预习，届时我们再好好讨论。 </p></div></div></div></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: lexzhang13@qq.com">zhang13pro</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.7723def3.js" defer></script>
  </body>
</html>
